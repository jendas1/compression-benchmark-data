(function(c){var m=c.fn.bootstrapTable.utils.sprintf,y=c.fn.bootstrapTable.utils.objectKeys,p=function(a,b,e){b=c.trim(b);a=c(a.get(a.length-1));var d;a:{d=b;for(var h=a.get(a.length-1).options,g=0;g<h.length;g++)if(h[g].value===d.toString()){d=!0;break a}d=!1}d||a.append(c("<option></option>").attr("value",b).text(c("<div />").html(e).text()))},q=function(a){var b=a.find("option:gt(0)");b.sort(function(a,b){a=c(a).text().toLowerCase();b=c(b).text().toLowerCase();c.isNumeric(a)&&c.isNumeric(b)&&(a=
parseFloat(a),b=parseFloat(b));return a>b?1:a<b?-1:0});a.find("option:gt(0)").remove();a.append(b)},t=function(a){var b=a.$header;a.options.height&&(b=a.$tableHeader);return b},u=function(a){var b="select, input";a.options.height&&(b="table select, table input");return b},z=function(a){if(c.fn.bootstrapTable.utils.isIEBrowser()&&c(a).is("input")){var b=0;if("selectionStart"in a)b=a.selectionStart;else if("selection"in document){a.focus();var b=document.selection.createRange(),e=document.selection.createRange().text.length;
b.moveStart("character",-a.value.length);b=b.text.length-e}return b}return-1},A=function(a,b){c.fn.bootstrapTable.utils.isIEBrowser()&&(void 0!==a.setSelectionRange?a.setSelectionRange(b,b):c(a).val(a.value))},w=function(a){var b=t(a),e=u(a);a.options.valuesFilterControl=[];b.find(e).each(function(){a.options.valuesFilterControl.push({field:c(this).closest("[data-field]").data("field"),value:c(this).val(),position:z(c(this).get(0))})})},v=function(a){var b=null,e=[],d=t(a),h=u(a);0<a.options.valuesFilterControl.length&&
d.find(h).each(function(d,h){b=c(this).closest("[data-field]").data("field");e=c.grep(a.options.valuesFilterControl,function(a){return a.field===b});0<e.length&&(c(this).val(e[0].value),A(c(this).get(0),e[0].position))})},B=function(){var a=[],b=document.cookie.match(/(?:bs.table.)(\w*)/g);if(b)return c.each(b,function(b,d){/./.test(d)&&(d=d.split(".").pop());-1===c.inArray(d,a)&&a.push(d)}),a},C=function(a){var b=a.options.data,e=a.options.pagination?"server"===a.options.sidePagination?a.pageTo:
a.options.totalRows:a.pageTo;c.each(a.header.fields,function(d,h){var g=a.columns[c.fn.bootstrapTable.utils.getFieldIndex(a.columns,h)],r=c(".bootstrap-table-filter-control-"+String(g.field).replace(/(:|\.|\[|\]|,)/g,"\\$1"));if(g.filterControl&&"select"===g.filterControl.toLowerCase()&&g.searchable&&(void 0===g.filterData||"column"===g.filterData.toLowerCase())&&r&&0<r.length){0===r.get(r.length-1).options.length&&p(r,"","");for(var g={},f=0;f<e;f++){var l=b[f][h],k=c.fn.bootstrapTable.utils.calculateObjectValue(a.header,
a.header.formatters[d],[l,b[f],f],l);g[k]=l}for(var n in g)p(r,g[n],n);q(r)}})},x=function(a,b){var e=!1,d,h,g=0;c.each(a.columns,function(g,f){d="hidden";h=[];if(f.visible){if(f.filterControl){h.push('<div style="margin: 0 2px 2px 2px;" class="filterControl">');var l=f.filterControl.toLowerCase();f.searchable&&a.options.filterTemplate[l]&&(e=!0,d="visible",h.push(a.options.filterTemplate[l](a,f.field,d)))}else h.push('<div style="height: 34px;"></div>');c.each(b.children().children(),function(a,
b){b=c(b);if(b.data("field")===f.field)return b.find(".fht-cell").append(h.join("")),!1});if(void 0!==f.filterData&&"column"!==f.filterData.toLowerCase()){var l=D(E,f.filterData.substring(0,f.filterData.indexOf(":"))),k,n;if(null!==l)k=f.filterData.substring(f.filterData.indexOf(":")+1,f.filterData.length),n=c(".bootstrap-table-filter-control-"+String(f.field).replace(/(:|\.|\[|\]|,)/g,"\\$1")),p(n,"",""),l(k,n);else throw new SyntaxError('Error. You should use any of these allowed filter data methods: var, json, url. Use like this: var: {key: "value"}');
var m;switch(l){case "url":c.ajax({url:k,dataType:"json",success:function(a){for(var b in a)p(n,b,a[b]);q(n)}});break;case "var":l=window[k];for(m in l)p(n,m,l[m]);q(n);break;case "jso":l=JSON.parse(k);for(m in l)p(n,m,l[m]);q(n)}}}});e?(b.off("keyup","input").on("keyup","input",function(b){clearTimeout(g);g=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut)}),b.off("change","select").on("change","select",function(b){clearTimeout(g);g=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut)}),
b.off("mouseup","input").on("mouseup","input",function(b){var e=c(this);""!==e.val()&&setTimeout(function(){""===e.val()&&(clearTimeout(g),g=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut))},1)}),0<b.find(".date-filter-control").length&&c.each(a.columns,function(a,e){if(void 0!==e.filterControl&&"datepicker"===e.filterControl.toLowerCase())b.find(".date-filter-control.bootstrap-table-filter-control-"+e.field).datepicker(e.filterDatepickerOptions).on("changeDate",function(a){c(a.currentTarget).keyup()})})):
b.find(".filterControl").hide()},F=function(a){a=void 0===a?"left":a.toLowerCase();switch(a){case "left":return"ltr";case "right":return"rtl";case "auto":return"auto";default:return"ltr"}},E={"var":function(a,b){var c=window[a],d;for(d in c)p(b,d,c[d]);q(b)},url:function(a,b){c.ajax({url:a,dataType:"json",success:function(a){for(var c in a)p(b,c,a[c]);q(b)}})},json:function(a,b){var c=JSON.parse(a),d;for(d in c)p(b,d,c[d]);q(b)}},D=function(a,b){for(var c=Object.keys(a),d=0;d<c.length;d++)if(c[d]===
b)return a[b];return null};c.extend(c.fn.bootstrapTable.defaults,{filterControl:!1,onColumnSearch:function(a,b){return!1},filterShowClear:!1,alignmentSelectControlOptions:void 0,filterTemplate:{input:function(a,b,c){return m('<input type="text" class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s">',b,c)},select:function(a,b,c){return m('<select class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" dir="%s"></select>',b,c,F(a.options.alignmentSelectControlOptions))},
datepicker:function(a,b,c){return m('<input type="text" class="form-control date-filter-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s">',b,c)}},valuesFilterControl:[]});c.extend(c.fn.bootstrapTable.COLUMN_DEFAULTS,{filterControl:void 0,filterData:void 0,filterDatepickerOptions:void 0,filterStrictSearch:!1,filterStartsWithSearch:!1});c.extend(c.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":"onColumnSearch"});c.extend(c.fn.bootstrapTable.defaults.icons,
{clear:"glyphicon-trash icon-clear"});c.extend(c.fn.bootstrapTable.locales,{formatClearFilters:function(){return"Clear Filters"}});c.extend(c.fn.bootstrapTable.defaults,c.fn.bootstrapTable.locales);var k=c.fn.bootstrapTable.Constructor,G=k.prototype.init,H=k.prototype.initToolbar,I=k.prototype.initHeader,J=k.prototype.initBody,K=k.prototype.initSearch;k.prototype.init=function(){if(this.options.filterControl){var a=this;Object.keys||y();this.options.valuesFilterControl=[];this.$el.on("reset-view.bs.table",
function(){a.options.height&&(0<a.$tableHeader.find("select").length||0<a.$tableHeader.find("input").length||x(a,a.$tableHeader))}).on("post-header.bs.table",function(){v(a)}).on("post-body.bs.table",function(){a.options.height&&a.$tableHeader.css("height","77px")}).on("column-switch.bs.table",function(){v(a)})}G.apply(this,Array.prototype.slice.apply(arguments))};k.prototype.initToolbar=function(){this.showToolbar=this.options.filterControl&&this.options.filterShowClear;H.apply(this,Array.prototype.slice.apply(arguments));
if(this.options.filterControl&&this.options.filterShowClear){var a=this.$toolbar.find(">.btn-group"),b=a.find(".filter-show-clear");b.length||(b=c(['<button class="btn btn-default filter-show-clear" ',m('type="button" title="%s">',this.options.formatClearFilters()),m('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.clear),"</button>"].join("")).appendTo(a),b.off("click").on("click",c.proxy(this.clearFilterControl,this)))}};k.prototype.initHeader=function(){I.apply(this,Array.prototype.slice.apply(arguments));
this.options.filterControl&&x(this,this.$header)};k.prototype.initBody=function(){J.apply(this,Array.prototype.slice.apply(arguments));C(this)};k.prototype.initSearch=function(){K.apply(this,Array.prototype.slice.apply(arguments));if("server"!==this.options.sidePagination){var a=this,b=c.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=b?c.grep(this.data,function(e,d){for(var h in b){var g=a.columns[c.fn.bootstrapTable.utils.getFieldIndex(a.columns,h)],k=b[h].toLowerCase(),
f=e[h];g&&g.searchFormatter&&(f=c.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[c.inArray(h,a.header.fields)],[f,e,d],f));if(g.customSearch){if(-1===c.inArray(h,a.header.fields)||"string"!==typeof f&&"number"!==typeof f||!g.customSearch(k,e[h]))return!1}else if(g.filterStrictSearch){if(-1===c.inArray(h,a.header.fields)||"string"!==typeof f&&"number"!==typeof f||f.toString().toLowerCase()!==k.toString().toLowerCase())return!1}else if(g.filterStartsWithSearch){if(-1===c.inArray(h,
a.header.fields)||"string"!==typeof f&&"number"!==typeof f||0!==(f+"").toLowerCase().indexOf(k))return!1}else if(-1===c.inArray(h,a.header.fields)||"string"!==typeof f&&"number"!==typeof f||-1===(f+"").toLowerCase().indexOf(k))return!1}return!0}):this.data}};k.prototype.initColumnSearch=function(a){w(this);if(a){this.filterColumnsPartial=a;this.updatePagination();for(var b in a)this.trigger("column-search",b,a[b])}};k.prototype.onColumnSearch=function(a){if(!(-1<c.inArray(a.keyCode,[37,38,39,40]))){w(this);
var b=c.trim(c(a.currentTarget).val()),e=c(a.currentTarget).closest("[data-field]").data("field");c.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={});b?this.filterColumnsPartial[e]=b:delete this.filterColumnsPartial[e];this.searchText+="randomText";this.options.pageNumber=1;this.onSearch(a);this.trigger("column-search",e,b)}};k.prototype.clearFilterControl=function(){if(this.options.filterControl&&this.options.filterShowClear){var a=this,b=B(),e=t(a),d=e.closest("table"),h=
e.find(u(a)),g=a.$toolbar.find(".search input"),k=0;c.each(a.options.valuesFilterControl,function(a,b){b.value=""});v(a);if(0<h.length){this.filterColumnsPartial={};c(h[0]).trigger("INPUT"===h[0].tagName?"keyup":"change");0<g.length&&a.resetSearch();if(a.options.sortName!==d.data("sortName")||a.options.sortOrder!==d.data("sortOrder"))e=e.find(m('[data-field="%s"]',c(h[0]).closest("table").data("sortName"))),0<e.length&&(a.onSort(d.data("sortName"),d.data("sortName")),c(e).find(".sortable").trigger("click"));
clearTimeout(k);k=setTimeout(function(){b&&0<b.length&&c.each(b,function(b,c){void 0!==a.deleteCookie&&a.deleteCookie(c)})},a.options.searchTimeOut)}}}})(jQuery);
